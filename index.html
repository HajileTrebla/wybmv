<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Be My Valentine ğŸ’–</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Alpine -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Prevent Alpine flash -->
    <style>
        [x-cloak] { display: none !important; }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-pink-200 via-rose-200 to-red-200 flex items-center justify-center">

<div
    x-data="{
        answered: false,
        yes: false,
        noClicks: 0,
        showSubtitle: false,
        showTitle: true,
        showPlaylist: false,

        spotifyWebUrl: 'https://open.spotify.com/playlist/7cZrA0jtoddkyamhKHOcMT',
        spotifyAppUrl: 'spotify:playlist:7cZrA0jtoddkyamhKHOcMT',

        openSpotify() {
            const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent)

            if (isMobile) {
                window.location.href = this.spotifyAppUrl
                setTimeout(() => {
                    window.location.href = this.spotifyWebUrl
                }, 1000)
            } else {
                window.open(this.spotifyWebUrl, '_blank')
            }
        },

        subtitles: [
            'Are you absolutely sure? ğŸ¥º',
            'My heart is crackingâ€¦ ğŸ’”',
            'Think again ğŸ˜',
            'I wonâ€™t ask anyone else ğŸ˜¢',
            'This is getting awkwardâ€¦',
            'Donâ€™t do this to me ğŸ˜­',
            'Youâ€™re breaking my heart ğŸ’˜',
            'Last chanceâ€¦ maybe? ğŸ«£'
        ],

        subtitle: '',

        randomizeSubtitle() {
            this.subtitle = this.subtitles[
                Math.floor(Math.random() * this.subtitles.length)
            ]
        },

        noScale() {
            return Math.max(0.3, 1 - this.noClicks * 0.15)
        },

        yesScale() {
            return Math.min(2.2, 1 + this.noClicks * 0.15)
        }
    }"
    class="bg-white/80 backdrop-blur-md rounded-2xl shadow-xl p-10 text-center max-w-md w-full"
>

    <!-- QUESTION -->
    <template x-if="!answered">
        <div>
            <img
                x-show="showTitle"
                x-transition
                src="images/me.png"
                alt="My photo"
                class="w-24 h-24 mx-auto mb-4 rounded-full border-4 border-rose-400 shadow-lg"
            />

            <img
                x-cloak
                x-show="showSubtitle"
                x-transition
                src="images/sad.png"
                alt="Sad face"
                class="w-24 h-24 mx-auto mb-4 rounded-full border-4 border-rose-400 shadow-lg"
            />

            <div x-show="showTitle" x-transition>
                <h1 class="text-3xl font-bold text-rose-600 mb-4">
                    Ace, sorry for the late question but...
                </h1>
                <h1 class="text-3xl font-bold text-rose-600 mb-4">
                    Will you be my Valentine? ğŸ’˜
                </h1>
            </div>

            <p
                x-cloak
                x-show="showSubtitle"
                x-transition
                class="text-3xl font-bold text-rose-600 mb-4"
                x-text="subtitle"
            ></p>

            <div class="flex justify-center gap-6 items-center">
                <!-- YES -->
                <button
                    @click="answered = true; yes = true"
                    :style="`transform: scale(${yesScale()})`"
                    class="px-6 py-3 rounded-full bg-rose-500 text-white font-semibold transition duration-300 hover:bg-rose-600"
                >
                    Yes ğŸ’–
                </button>

                <!-- NO -->
                <button
                    @click="
                        noClicks++;
                        showSubtitle = true;
                        showTitle = false;
                        randomizeSubtitle();
                    "
                    :style="`transform: scale(${noScale()})`"
                    class="px-6 py-3 rounded-full bg-gray-300 text-gray-700 font-semibold transition duration-300"
                >
                    No ğŸ’”
                </button>
            </div>
        </div>
    </template>

    <!-- YES RESPONSE -->
    <div
        x-cloak
        x-show="answered && yes"
        x-transition.opacity
        class="space-y-6"
    >
        <div class="animate-bounce">
            <img
                src="images/happy.png"
                alt="Happy face"
                class="w-24 h-24 mx-auto rounded-full border-4 border-rose-400 shadow-lg"
            />

            <h2 class="text-4xl font-extrabold text-rose-600 mt-4">
                Yay!!! ğŸ¥°
            </h2>

            <p class="text-lg text-gray-700">
                Youâ€™re officially my Valentine â¤ï¸
            </p>
        </div>

        <div
            x-show="showPlaylist"
            x-transition
            class="mt-6"
        >
            <iframe
                class="mx-auto rounded-xl shadow-lg"
                style="border-radius:12px"
                src="https://open.spotify.com/embed/playlist/7cZrA0jtoddkyamhKHOcMT?theme=0"
                width="100%"
                height="152"
                frameborder="0"
                allow="clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                loading="lazy"
            ></iframe>
        </div>
    </div>

    <!-- HIDDEN SPOTIFY BUTTON -->
    <button
        x-cloak
        x-show="answered && yes && !showPlaylist"
        x-transition
        @click="
            openSpotify();
            showPlaylist = true;
        "
        class="mx-auto block mt-4 text-sm text-rose-500 hover:text-rose-600 underline italic"
    >
        ğŸµ I have something for youâ€¦
    </button>

</div>

</body>
</html>`